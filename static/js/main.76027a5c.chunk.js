(this["webpackJsonpreact-query-generic-hook-example"]=this["webpackJsonpreact-query-generic-hook-example"]||[]).push([[0],{179:function(e,t,n){e.exports=n(336)},180:function(e,t,n){},336:function(e,t,n){"use strict";n.r(t);n(180);var a=n(0),r=n.n(a),c=n(27),u=n.n(c),o=n(106),i=n(32),l=n(55),s=n(145),f=n(171),m=n(342),d=n(178),p=n(172),b=n(46),v=n.n(b),E=n(72),h=n(51),O="FETCH",y="CREATE",j="UPDATE",g="DELETE",w=function(e){return h.a.invalidateQueries(e)},S={silent:!1,shouldInvalidate:!0},k=function(e,t,n){var r=!!Object(h.b)([e]),c=Object(a.useState)([e]),u=Object(l.a)(c,2),s=u[0],f=u[1],m=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return{onSuccess:function(){var r=t!==O&&(null===a||void 0===a?void 0:a.shouldInvalidate)&&!(null!==a&&void 0!==a&&a.mutateReducer);null!==a&&void 0!==a&&a.silent||null===n||void 0===n||!n.onSuccess||n.onSuccess(t,e),r&&w(e)},onError:function(){null!==a&&void 0!==a&&a.silent||null===n||void 0===n||!n.onError||n.onError(t,e)},onMutate:null!==a&&void 0!==a&&a.mutateReducer?function(t){h.a.cancelQueries(e,{active:!0});var n=h.a.getQuery(s);if(n){var r=h.a.getQueryData(n.queryKey);h.a.setQueryData(n.queryKey,(function(e){return a.mutateReducer(e,t)||r}))}}:null}},d=function(){var n=Object(E.a)(v.a.mark((function n(a){var r,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f([e,a]),n.next=3,t.fetch(a);case 3:return r=n.sent,c=r.data,n.abrupt("return",c);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(){var e=Object(E.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.fetchOne(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(E.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.create(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(E.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.update(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(E.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.delete(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e,t,n,a){return h.c.apply(void 0,Object(o.a)(function(e,t,n,a){return[t,Object(i.a)(Object(i.a)({},m(e,a)),n)]}(e,t,n,a)))};return{isFetching:r,useFetch:function(t,n,a){return Object(h.d)([e,t],(function(){return d(t)}),Object(i.a)(Object(i.a)({enabled:t},m(O,Object(i.a)(Object(i.a)({},a),{},{shouldInvalidate:!1}))),n))},useFetchOne:function(t,n,a){return Object(h.d)([e,t],(function(){return p(t)}),Object(i.a)(Object(i.a)({enabled:t},m(O,Object(i.a)(Object(i.a)({},a),{},{shouldInvalidate:!1}))),n))},useCreate:function(e,t){return x(y,b,e,t)},useUpdate:function(e,t){return x(j,k,e,t)},useDelete:function(e,t){return x(g,q,e,t)},useGenericMutation:x}},q=n(345),x=n(175),F=n(343),I=n(346),C=n(339),D=n(340),_=n(73),R=n(347),Q=n(348),T=n(341),z=n(344),L=function(e){var t=e.onSave,n=T.a.useForm(),a=Object(l.a)(n,1)[0];return r.a.createElement(T.a,{layout:"vertical",form:a,initialValues:{first_name:"",last_name:"",email:""},onFinish:function(e){t(e),a.resetFields()}},r.a.createElement(T.a.Item,{label:"First name",name:"first_name",rules:[{required:!0,message:"Please input your first name!"}]},r.a.createElement(z.a,null)),r.a.createElement(T.a.Item,{label:"Last name",name:"last_name",rules:[{required:!0,message:"Please input your last name!"}]},r.a.createElement(z.a,null)),r.a.createElement(T.a.Item,{label:"Email",name:"email",rules:[{type:"email"}]},r.a.createElement(z.a,null)),r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Submit"))},P=q.b.Item,U=function(e){var t=e.data,n=e.onCreate,a=e.onDelete;return r.a.createElement(I.b,{direction:"vertical",size:"large",style:{width:"100%"}},t.length?r.a.createElement(C.a,{gutter:32},r.a.createElement(D.a,{flex:1},r.a.createElement(q.b,{header:"Users list",itemLayout:"horizontal",bordered:!0,rowKey:"id",dataSource:t,renderItem:function(e){var t=e.first_name,n=e.last_name,c=e.email,u=e.avatar,o=e.id;return r.a.createElement(P,{actions:[r.a.createElement(x.a,{onClick:function(){return a(o)},icon:r.a.createElement(R.a,null),shape:"circle"})]},r.a.createElement(P.Meta,{title:"".concat(t," ").concat(n),description:c,avatar:r.a.createElement(F.a,{icon:r.a.createElement(Q.a,null),src:u})}))}})),r.a.createElement(D.a,{span:8},r.a.createElement(L,{onSave:n}))):r.a.createElement(_.a,null))};U.defaultProps={data:[]};var A=U,K=(n(318),m.a.Text),M=s.create({baseURL:"https://reqres.in/api/",validateStatus:function(e){return e>=200&&e<300}}),N={onSuccess:function(e,t){return d.b.success("".concat(e,' request succeed for query key "').concat(t,'"'))},onError:function(e,t){return d.b.error("".concat(e,' request failed for query key "').concat(t,'"'))}},J=function(){var e,t,n=Object(a.useState)({page:1,per_page:10}),c=Object(l.a)(n,2),u=c[0],s=c[1],m=k("users",(e=M,t="users",{fetch:function(n){return e.get("".concat(t,"/"),{params:n})},fetchOne:function(n){return e.get("".concat(t,"/").concat(n,"/"))},create:function(n){return e.post("".concat(t,"/"),n)},update:function(n){return e.put("".concat(t,"/").concat(n.id,"/"),n)},delete:function(n){return e.delete("".concat(t,"/").concat(n,"/"))}}),N),d=m.isFetching,b=m.useFetch,v=m.useCreate,E=m.useDelete,h=b(u,null,{silent:!1}).data,O=(h=void 0===h?{}:h).data,y=void 0===O?[]:O,j=h.page,g=h.total,w=v(null,{mutateReducer:function(e,t){return Object(i.a)(Object(i.a)({},e),{},{data:[t].concat(Object(o.a)(e.data))})}}),S=Object(l.a)(w,1)[0],q=E(null,{mutateReducer:function(e,t){return Object(i.a)(Object(i.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t}))})}}),x=Object(l.a)(q,1)[0];return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"pagination-box"},r.a.createElement(p.a,{pageSize:u.per_page,current:j,showSizeChanger:!0,onChange:function(e,t){return s(Object(i.a)(Object(i.a)({},u),{},{page:e,per_page:t}))},total:g}),r.a.createElement("br",null),r.a.createElement(K,null,"Any fetch in action for query key ",r.a.createElement(K,{code:!0},"users"),": ",d?"YES":"NO")),r.a.createElement(A,{data:y,onCreate:function(e){return S(e)},onDelete:function(e){return x(e)}}),r.a.createElement(f.ReactQueryDevtools,null))};u.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.76027a5c.chunk.js.map